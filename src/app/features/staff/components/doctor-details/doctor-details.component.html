<div class="details-container">
    <button mat-button color="primary" routerLink="../../doctors" class="back-button">
        <mat-icon>arrow_back</mat-icon> Back to Doctors
    </button>

    <div *ngIf="doctor$ | async as doctor; else loading">
        <mat-card class="details-card">
            <mat-card-header>
                <div class="card-header-content">
                    <div mat-card-avatar class="avatar">
                        <mat-icon>medical_services</mat-icon>
                    </div>
                    <div>
                        <mat-card-title>{{ doctor.first_name }} {{ doctor.last_name | uppercase }}</mat-card-title>
                        <mat-card-subtitle>{{ doctor.email }}</mat-card-subtitle>
                    </div>
                </div>
            </mat-card-header>

            <mat-divider class="divider"></mat-divider>

            <mat-card-content>
                <div class="content-grid">
                    <!-- Contact Info -->
                    <div class="info-group">
                        <h3 class="section-title">
                            <mat-icon class="text-sm">contact_phone</mat-icon>
                            Contact Details
                        </h3>
                        <div class="info-item">
                            <span class="label">Phone Number</span>
                            <span class="value">{{ doctor.phone }}</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Email Address</span>
                            <span class="value">{{ doctor.email }}</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Member Since</span>
                            <span class="value">{{ doctor.created_at | date:'longDate' }}</span>
                        </div>
                    </div>

                    <!-- Hospital Info -->
                    <div class="info-group" *ngIf="doctor.hospital">
                        <h3 class="section-title">
                            <mat-icon class="text-sm">local_hospital</mat-icon>
                            Hospital Information
                        </h3>
                        <div class="info-item">
                            <span class="label">Hospital Name</span>
                            <span class="value highlight">{{ doctor.hospital.name }}</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Address</span>
                            <span class="value">
                                <address>{{ doctor.hospital.address }}</address>
                            </span>
                        </div>
                        <div class="info-item">
                            <span class="label">Primary Contact</span>
                            <span class="value">
                                {{ doctor.hospital.contact_person }}
                                <span class="text-sm text-gray-500 block" *ngIf="doctor.hospital.phone">
                                    {{ doctor.hospital.phone }}
                                </span>
                            </span>
                        </div>
                    </div>

                    <!-- If no hospital info -->
                    <div class="info-group" *ngIf="!doctor.hospital">
                        <h3 class="section-title">
                            <mat-icon class="text-sm">local_hospital</mat-icon>
                            Hospital Information
                        </h3>
                        <div class="flex flex-col items-center justify-center h-full text-center py-4 opacity-50">
                            <mat-icon class="text-4xl mb-2">domain_disabled</mat-icon>
                            <p>No hospital information linked.</p>
                        </div>
                    </div>
                </div>
            </mat-card-content>
        </mat-card>
    </div>

    <ng-template #loading>
        <div class="loading-container">
            <mat-spinner diameter="40"></mat-spinner>
        </div>
    </ng-template>
</div>